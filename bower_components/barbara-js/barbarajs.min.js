/*
 BarbaraJS v1.2.1
 (c) 2016 Jhordan Lima. https://github.com/Jhorzyto/barbara.js
 License: MIT
 */

var barbaraJs=angular.module("Barbara-Js",[]);barbaraJs.run(function(){var a="<style type='text/css'>.glyphicon.spinning{animation:spin 1s infinite linear;-webkit-animation:spin2 1s infinite linear}@keyframes spin{from{transform:scale(1) rotate(0)}to{transform:scale(1) rotate(360deg)}}@-webkit-keyframes spin2{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}</style>";angular.element(document).find("head").prepend(a)}),barbaraJs.factory("$request",["$http",function(a){var t=function(a){return{code:a.status,error_message:a.status>=200&&a.status<=300?'Estrutura de retorno inválida! Use "$request.checkResponse(false);" na requisição para permitir outros retornos':""!=a.statusText?a.statusText:"Não foi possivel realizar esta requisição! Código de erro "+a.status}},e=function(a,e,i,n){if(angular.isDefined(e.callbackLoad)&&e.callbackLoad.loaded(),e.checkMeta)if(angular.isObject(a.data))if(angular.isObject(a.data.meta)&&angular.isDefined(a.data.meta.code))a.data.meta.code>=200&&a.data.meta.code<=299?i(a.data.data,a.data.meta,a):n(a.data.meta,a.status,a),angular.forEach(e.callback,function(t){this.code==t.metaCode&&t.callback(a.data.data,a.data.meta,a)},a.data.meta);else{var s=t(a);angular.forEach(e.callback,function(t){this.code==t.metaCode&&t.callback(s,a.status,a)},s),n(s,a.status,a)}else n(t(a),a.status,a);else i(a)},i=function(a,e,i){angular.isDefined(e.callbackLoad)&&e.callbackLoad.loaded(),angular.isObject(a.data)&&angular.isObject(a.data.meta)&&(a.status=angular.isDefined(a.data.meta.code)?a.data.meta.code:a.status,a.statusText=angular.isDefined(a.data.meta.error_message)?a.data.meta.error_message:a.statusText);var n=t(a);angular.forEach(e.callback,function(t){this.code==t.metaCode&&t.callback(n,a.status,a)},n),i(n,a.status,a)};return{parameter:{},data:{},headers:{"X-Requested-With":"XMLHttpRequest"},method:"GET",url:void 0,callback:[],callbackLoad:void 0,checkMeta:!0,config:{},checkResponse:function(a){return this.checkMeta=a?!0:!1,this},removeAjaxHeader:function(){return angular.isDefined(this.headers["X-Requested-With"])&&delete this.headers["X-Requested-With"],this},addCallback:function(a,t){return angular.isNumber(a)&&angular.isFunction(t)&&this.callback.push({metaCode:a,callback:t}),this},addMethod:function(a){return this.method=angular.isString(a)?a:"GET",this},addData:function(a){return this.data=angular.isObject(a)?a:{},this},addParams:function(a){return this.parameter=angular.isObject(a)?a:{},this},addHeaders:function(a){return angular.isObject(a)&&(this.headers=angular.extend(this.headers,a)),this},addUrl:function(a){return this.url=angular.isString(a)?a:this.url,this},load:function(a,t){if(angular.isObject(a)&&angular.isFunction(a.loading)&&angular.isFunction(a.loaded)&&(t=a.loaded,a=a.loading),!angular.isFunction(a)||!angular.isFunction(t))throw"Não foi possível adicionar as funções de carregamento!";return this.callbackLoad={onLoading:a,loaded:t},this},get:function(a){return this.addUrl(a),this.addMethod("GET"),angular.copy(this)},post:function(a){return this.addUrl(a),this.addMethod("POST"),angular.copy(this)},put:function(a){return this.addUrl(a),this.addMethod("PUT"),angular.copy(this)},"delete":function(a){return this.addUrl(a),this.addMethod("DELETE"),angular.copy(this)},jsonp:function(a){return this.addUrl(a),this.addMethod("JSONP"),angular.copy(this)},send:function(t,n){var s=this;if(!angular.isFunction(t))throw"É necessário definir um callback de sucesso no $request.send()!";if(angular.isFunction(n)||(n=function(){}),!angular.isDefined(s.url))throw"Nenhum URL foi definido!";switch(angular.isDefined(s.callbackLoad)&&s.callbackLoad.onLoading(),s.config.headers=s.headers,s.method){case"GET":angular.extend(s.parameter,s.data),s.config.params=s.parameter,a.get(s.url,s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)});break;case"POST":s.config.params=s.parameter,a.post(s.url,s.data,s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)});break;case"PUT":s.config.params=s.parameter,a.put(s.url,s.data,s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)});break;case"DELETE":s.config.params=s.parameter,s.config.data=s.data,a.delete(s.url,s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)});break;case"JSONP":s.config.params=s.parameter,s.config.data=s.data,s.config.params.callback="JSON_CALLBACK",a.jsonp(s.url,s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)});break;default:s.config.params=s.parameter,s.config.data=s.data,s.config.method=s.method,s.config.url=s.url,a(s.config).then(function(a){e(a,s,t,n)},function(a){i(a,s,n)})}}}}]),barbaraJs.factory("bootstrap",function(){return{alert:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},type:void 0,changeType:function(a){this.type=angular.isString(a)?a:this.type},title:void 0,changeTitle:function(a){this.title=angular.isString(a)?a:this.title},message:void 0,changeMessage:function(a){this.message=angular.isString(a)?a:this.message},responseSuccess:function(a){angular.isString(a)&&(this.changeTitle("Sucesso!"),this.changeType("success"),this.changeMessage(a),this.changeShow(!0))},responseError:function(a){this.changeTitle("Algo não ocorreu bem!"),this.changeType("danger"),angular.isDefined(a.error_message)&&angular.isString(a.error_message)?(this.changeMessage(a.error_message),this.changeType("warning")):this.changeMessage("Ocorreu um erro ao fazer uma requisição! Acompanhe o console do navegador para ter mais detalhes."),this.changeShow(!0)}}},loading:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},message:"Carregando...",changeMessage:function(a){this.message=angular.isString(a)?a:this.message},onLoading:function(a){this.message=angular.isString(a)?a:this.message,this.changeShow(!0)},loaded:function(){this.changeShow(!1)},getRequestLoad:function(a){var t=this;return{loading:function(){t.onLoading(a)},loaded:function(){t.loaded()}}}}},pagination:function(){return{pages:0,currentPage:1,pagination:[],callback:void 0,changePageCallback:function(a){this.callback=angular.isFunction(a)?a:this.callback},changePages:function(a){this.pages=angular.isNumber(a)?a:this.pages,this.processPagination()},changeCurrentPage:function(a){return this.currentPage=angular.isNumber(a)&&a>0&&a<=this.pages?a:this.currentPage,a==this.currentPage?!0:!1},processPagination:function(){0!=this.pages&&(this.pagination=[],this.pagination.push({item:1,role:this.pages>0}),this.pagination.push({item:this.pages<=9?2:this.currentPage<=5?2:void 0,role:this.pages>2}),this.pagination.push({item:this.pages<=9||this.currentPage<=5?3:this.currentPage+5>=this.pages?this.pages-6:this.currentPage-2,role:this.pages>3}),this.pagination.push({item:this.pages<=9||this.currentPage<=5?4:this.currentPage+5>=this.pages?this.pages-5:this.currentPage-1,role:this.pages>4}),this.pagination.push({item:this.pages<=9||this.currentPage<=5?5:this.currentPage+5>=this.pages?this.pages-4:this.currentPage,role:this.pages>5}),this.pagination.push({item:this.pages<=9||this.currentPage<=5?6:this.currentPage+5>=this.pages?this.pages-3:this.currentPage+1,role:this.pages>6}),this.pagination.push({item:this.pages<=9||this.currentPage<=5?7:this.currentPage+5>=this.pages?this.pages-2:this.currentPage+2,role:this.pages>7}),this.pagination.push({item:this.pages<=9?8:10==this.pages&&5==this.currentPage?void 0:this.currentPage+5>=this.pages?this.pages-1:void 0,role:this.pages>8}),this.pagination.push({item:this.pages,role:this.pages>1}),angular.forEach(this.pagination,function(a){a.class={active:this.currentPage==a.item,disabled:angular.isUndefined(a.item)}},this))},clickAction:function(a){angular.isDefined(a)&&this.changeCurrentPage(a)&&(angular.isFunction(this.callback)?(this.changePages(0),this.callback(this)):this.processPagination())}}}}}),barbaraJs.directive("alertBootstrap",function(){return{restrict:"A",template:"<div class='alert alert-{{alert.type}} alert-dismissible' role='alert' ng-if='alert.show'><button type='button' class='close' ng-click='alert.changeShow()'><span aria-hidden='true'>&times;</span></button><strong>{{alert.title}}</strong> {{alert.message}}</div>"}}),barbaraJs.directive("loadingBootstrap",function(){return{restrict:"A",template:"<div class='progress' ng-if='loading.show'> <div class='progress-bar progress-bar-striped active' role='progressbar' style='width: 100%'><i class='glyphicon glyphicon-refresh spinning'></i> <strong>{{loading.message}}</strong></div></div>"}}),barbaraJs.directive("paginationBootstrap",function(){return{restrict:"A",template:"<nav ng-if='pagination.pages > 0'> <ul class='pagination'> <li ng-repeat='page in pagination.pagination' ng-if='page.role' ng-class='page.class'> <a href='' ng-click='pagination.clickAction(page.item)'>{{page.item ? page.item : '...'}}</a> </li></ul> </nav>"}}),barbaraJs.filter("timeago",function(){return function(a){var t=(new Date).getTime();if(!a)return"indefinido";if(angular.isDate(a)?a=a.getTime():angular.isNumber(a)?a=new Date(1e3*a).getTime():angular.isString(a)&&(a=new Date(a).getTime()),!angular.isNumber(a))return"Data invalida";var e=Math.abs((t-a)/1e3),i=[],n=60,s=3600,r=86400,o=604800,c=31556926;return i=n>=e?["","agora"]:60*n>e?[Math.round(Math.abs(e/n)),"m"]:24*s>e?[Math.round(Math.abs(e/s)),"h"]:7*r>e?[Math.round(Math.abs(e/r)),"d"]:52*o>e?[Math.round(Math.abs(e/o)),"sm"]:10*c>e?[Math.round(Math.abs(e/c)),"a"]:["","..."],i=i.join(""),t>=a?"há "+i:i}}),barbaraJs.filter("cuttext",function(){return function(a,t,e,i){if(!a||!angular.isString(a))return"";if(!e||!angular.isNumber(e))return a;if(e=parseInt(e,10),a.length<=e||t)return a;a=a.substr(0,e);var n=a.lastIndexOf(" ");return-1!=n&&(a=a.substr(0,n)),a+(i||" …")}});